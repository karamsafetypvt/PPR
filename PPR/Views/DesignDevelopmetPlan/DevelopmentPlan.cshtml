@using PPRModel.Model
@model DevelopmentPlanModel
@{
    //int i = ViewBag.RowNumber;
    //int row = i + 1;
    ViewBag.Title = "Activity";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int i = 0;
    string precentage = "";
}
<style>
    .tblrespoonsive {
        overflow-x: auto;
    }

    .rowwidth {
        width: 100px;
    }

    .modal {
        left: 23% !important;
        z-index: 1050;
        width: 1280px;
    }

    #btnSave1 {
        display: none;
        position: fixed;
        bottom: 50%;
        right: 30px;
        z-index: 99;
        font-size: 18px;
        border: none;
        outline: none;
        /*background-color: lightseagreen;*/
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
    }

    #container {
        text-align: center;
        margin: 20px;
    }

    .bar-main-container {
        margin: 0px auto;
        width: 100px;
        height: 20px;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
        font-family: sans-serif;
        font-weight: normal;
        font-size: 0.8em;
        color: #FFF;
    }

    .wrap {
        padding: 0px;
    }

    a.activity:link {
        color: #08c;
    }

    a.activity:visited {
        color: #0000ff;
    }

    a.activity:hover {
        background-color: #08c;
        color: white;
    }

    .bar-percentage {
        float: left;
        background: rgba(0,0,0,0.13);
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
        padding: 0px 0px;
        width: 30%;
        height: 20px;
    }

    .bar-container {
        float: right;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        border-radius: 10px;
        height: 6px;
        background: rgba(0,0,0,0.13);
        width: 70%;
        margin: 7px 0px;
        overflow: hidden;
    }

    .bar {
        float: left;
        background: #FFF;
        height: 100%;
        -webkit-border-radius: 10px 0px 0px 10px;
        -moz-border-radius: 10px 0px 0px 10px;
        border-radius: 10px 0px 0px 10px;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
        filter: alpha(opacity=100);
        -moz-opacity: 1;
        -khtml-opacity: 1;
        opacity: 1;
    }

    /* COLORS */
    .azure {
        background: #38B1CC;
    }

    .emerald {
        background: #2CB299;
    }

    .violet {
        background: #8E5D9F;
    }

    .yellow {
        /*background: #EFC32F;*/
        background: #66a635cf;
    }

    .red {
        background: #E44C41;
    }
</style>
@*<link href="~/Content/css/datepicker.css" rel="stylesheet" />*@
<div id="content-header">
    <div id="breadcrumb"> <a href="#" title="Go to Home" class="tip-bottom"><i class="icon-home"></i>Home</a> <a href="#" class="current">Design Development Plan</a> </div>
    <h1>Design Development Sheet And Product Project Report</h1>
</div>
<div class="container-fluid">

    @using (Html.BeginForm("DevelopmentPlan", "DesignDevelopmetPlan", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        precentage = Convert.ToString(@Model.AllProgressPercentage) + '%';
        <div class="w3-light-grey  w3-round" style="background: #bab4c1; border-radius: 4px; ">
            @if (@Model.AllProgressPercentage > 100)
            {
                <div class="w3-container w3-green w3-center" style="width:@precentage;background: #30b23a; color: white; border-radius: 4px; ">100%</div>
            }
            else
            {
                <div class="w3-container w3-green w3-center" style="width:@precentage;background: #30b23a; color: white; border-radius: 4px; ">@Model.AllProgressPercentage%</div>
            }
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div class="widget-box">
                    <div class="widget-title">
                        <span class="icon"> <i class="icon-th"></i> </span>
                        <h5>Design Development Plan</h5>
                    </div>
                    <div class="widget-content nopadding">
                        <div class="form-horizontal">
                            <table class="table table table-condensed ">
                                <thead>

                                </thead>
                                <tbody>
                                    <tr class="odd gradeX">
                                        <td>
                                            <label>
                                                <b>Project Title</b> : <span>
                                                    @Html.DisplayFor(m => m.ProjectTitle)
                                                    @Html.HiddenFor(m => m.ProjectID, new { @id = "projectid" })
                                                </span>
                                            </label>

                                        </td>
                                        <td>
                                        </td>
                                        <td>
                                            <label><b>Project No</b> : <span>@Html.DisplayFor(m => m.ProjectNO)</span></label>

                                        </td>
                                        <td>
                                        </td>
                                        <td>
                                            <label><b>Product Ref</b> : <span>@Html.DisplayFor(m => m.ProductRefNo)</span></label>

                                        </td>
                                        <td>
                                        </td>
                                    </tr>

                                    <tr class="odd gradeX">

                                        <td>
                                            <label><b>Date</b> : <span>@Html.DisplayFor(m => m.OpeningDate)</span></label>

                                        </td>
                                        <td>
                                            <label class="control-label"></label>

                                        </td>
                                        <td>
                                            <label><b>Coordinator</b> : <span>@Html.DisplayFor(m => m.Coordinator)</span></label>

                                        </td>
                                        <td>
                                            <label class="control-label"></label>

                                        </td>
                                        <td></td>
                                        <td>
                                            @if (Model.Status != "3")
                                            {
                                                <button id="btnSave1" class="form-control btn btn-primary" onclick="topFunction()" type="submit">Save</button>
                                            }
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="widget-content nopadding tblrespoonsive">
                        <table class="table table-bordered table-striped" id="tblCustomers">
                            <thead>
                                <tr>
                                    <th>Action</th>
                                    <th style="display:none">Plan ID</th>
                                    <th style="display:none">ActivityID</th>
                                    <th>Activity</th>
                                    <th>Status</th>
                                    <th>Nature (Individual<br />/Team)</th>
                                    <th>Resources <br /> Req</th>
                                    <th>Responsibility</th>
                                    <th>Assigned Date</th>
                                    <th>Target Date</th>
                                    <th>Approving Authority</th>
                                    <th>Completion <br />Date</th>
                                    <th>Remarks</th>
                                    <th>
                                        Aging (in <br />days)
                                    </th>
                                    <th>
                                        Mark As Complete
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model._ActivityList != null)
                                {
                                    foreach (var item in Model._ActivityList)
                                    {
                                        <tr class="odd gradeX">
                                            @if (@item.SubActivity != "")
                                            {
                                                <td><button type="button" class="btn btn-info btn-sm" onclick="GetData('@item.SubActivityPageName','@item.SubActivity','@item.PlanID','@Model._ActivityList[i].CompletionDate')" style="font-size: 12px; padding: 0px; ">@item.SubActivity</button></td>
                                            }
                                            else
                                            {
                                                <td></td>
                                            }
                                            <td style="display: none;">@item.PlanID</td>
                                            <td style="display: none;">
                                                @Html.TextBoxFor(m => m._ActivityList[i].ActivityId, new { @class = "rowwidth", @id = "ActivityId" })
                                            </td>
                                            @if (item.Activity == "Preparation of prototype")
                                            {
                                                <td style="">
                                                    <a href="javascript:void(0)" class="activity" onclick="ShowDevelopmentsheet(@item.ActivityId,'@item.PlanID','@item.Activity')" style="font-weight:bold">@item.Activity</a>
                                                </td>
                                            }
                                            else
                                            {
                                                if (item.Activity == "DFMEA")
                                                {
                                                    <td style="color:black;">
                                                        @item.Activity
                                                        @Html.TextBoxFor(m => m.DesignValidation_DOCUMENTS, new { @Class = "from-control span11", @type = "File" })

                                                        @Html.HiddenFor(m => m.DesignValidation_DOCUMENTSPATH)
                                                        @Html.HiddenFor(m => m.DesignValidation_DocumentName)
                                                        <br />
                                                        <a id="DocLink" href="@Model.DesignValidation_DOCUMENTSPATH" target="_blank" rel="noopener">@Model.DesignValidation_DocumentName</a>
                                                        @if (@Model.DesignValidation_DOCUMENTSPATH != "")
                                                        {
                                                            @*<button type="button" id="DV_Remove" onclick="removeFileInput(this)">No file chosen</button>*@
                                                            <button type="button" class="btn btn-sm btn-danger" id="DV_Remove" onclick="removeFileInput(this)" style="padding:0px 5px"><span class="fa fa-remove"></span></button>
                                                        }

                                                    </td>
                                                }
                                                else
                                                {
                                                    if (item.Activity == "Preparation of BOM/Jobsheet" && Session["Dept_ID"].ToString()=="40")
                                                    {
                                                        <td style="color:black;"> <a href="https://tpdjobsheet.karam.in/ApprovalSheet/ApprovalListBySRFNoReport/@Model._ActivityList[i].Remarks.Trim()" target="_blank">@item.Activity</a></td>
                                                    }
                                                    else
                                                    {
                                                        <td style="color:black;"> @item.Activity</td>
                                                    }

                                                }
                                            }
                                            <td>
                                                
                                                @if (item.ProgressPercentage < 1)
                                                {
                                                    <div id="bar-1" class="bar-main-container red">
                                                        <div class="wrap">
                                                            <div class="bar-percentage" data-percentage="@item.ProgressPercentage"></div>
                                                            <div class="bar-container">
                                                                <div class="bar"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                                else
                                                {
                                                    if (item.ActivityMarkAsComplete == true)
                                                    {
                                                        <div id="bar-1" class="bar-main-container yellow">
                                                            <div class="wrap">
                                                                <div class="bar-percentage" data-percentage="@item.ProgressPercentage"></div>
                                                                <div class="bar-container">
                                                                    <div class="bar"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }
                                                    else if (item.ProgressPercentage > 1)
                                                    {
                                                        <div id="bar-1" class="bar-main-container yellow">
                                                            <div class="wrap">
                                                                <div class="bar-percentage" data-percentage="@item.ProgressPercentage"></div>
                                                                <div class="bar-container">
                                                                    <div class="bar"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }
                                                }
                                            </td>
                                            @if (item.Activity == "Further modifications/ improvement (if required) activity 4 onwards repeated")
                                            {
                                                <td>
                                                    @Html.DropDownListFor(m => m.FurtherModification4, new List<SelectListItem>
                          {new SelectListItem {Text = "Select", Value = "", Selected = true },
                              new SelectListItem {Text = "Not Req", Value = "1"},
                              new SelectListItem {Text = "Req", Value = "2" }
                          }, new { @style = "width: 100px;", @id = "FurtherModification4" })
                                                    @Html.HiddenFor(m => m._ActivityList[i].FurtherModification4)

                                                </td>
                                            }
                                            else if (item.Activity == "Further modification / improvement (if required) activity 10 onwards repeated")
                                            {
                                                <td>
                                                    @Html.DropDownListFor(m => m.FurtherModification10, new List<SelectListItem>
                            {
                                                   new SelectListItem {Text = "Select", Value = "", Selected = true },
                                new SelectListItem {Text = "Not Req", Value = "1"},
                                new SelectListItem {Text = "Req", Value = "2" }
                            }, new { @style = "width: 100px;", @id = "FurtherModification10" })

                                                </td>
                                            }
                                            else if (item.Activity == "Application for Patent /Design Application (If required) as per discretion of HOD R&D")
                                            {
                                                <td>
                                                    @Html.DropDownListFor(m => m.ApplicationforPatent, new List<SelectListItem>
                                            {
                                                   new SelectListItem {Text = "Select", Value = "", Selected = true },
                                new SelectListItem {Text = "Not Req", Value = "1"},
                                new SelectListItem {Text = "Req", Value = "2" }
                            }, new { @style = "width: 100px;", @id = "ApplicationforPatent" })

                                                </td>
                                            }
                                            else if (item.Activity == "Need of Involvement of Customer in development")
                                            {
                                                <td>
                                                    @Html.DropDownListFor(m => m.NeedOfDevelopment, new List<SelectListItem>
                                            {
                                                   new SelectListItem {Text = "Select", Value = "", Selected = true },
                                new SelectListItem {Text = "Not Req", Value = "1"},
                                new SelectListItem {Text = "Req", Value = "2" }
                            }, new { @style = "width: 100px;", @id = "DRPNeedOfDevelopment" })
                                                    @Html.HiddenFor(m => m._ActivityList[i].NeedOfDevelopment)
                                                </td>
                                            }
                                            else
                                            {
                                                @Html.HiddenFor(m => m._ActivityList[i].FurtherModification4)
                                                @Html.HiddenFor(m => m._ActivityList[i].Nature)
                                                <td>@item.Nature</td>
                                            }
                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td>@item.ResourcesReq</td>
                                            }
                                            else
                                            {
                                                <td></td>
                                            }

                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td>

                                                    <select id="Responsibility" class="req10" style="width:85px" onchange="ChangeResp(this)">
                                                        @foreach (SelectListItem option in Model._ResponsibilityList)
                                                        {
                                                            <option value="@option.Value" @(option.Value == Model._ActivityList[i].Responsibility ? "selected='selected'" : "")>@option.Text</option>
                                                        }
                                                    </select>
                                                    @Html.HiddenFor(m => m._ActivityList[i].Responsibility, new { @class = "Hdn1" })
                                                </td>
                                            }
                                            else
                                            {
                                                <td id="tdResponsibility">

                                                    <select id="Responsibility" class="req10" style="width: 85px; display: none" onchange="ChangeResp(this)">
                                                        @foreach (SelectListItem option in Model._ResponsibilityList)
                                                        {
                                                            <option value="@option.Value" @(option.Value == Model._ActivityList[i].Responsibility ? "selected='selected'" : "")>@option.Text</option>
                                                        }
                                                    </select>
                                                    @Html.HiddenFor(m => m._ActivityList[i].Responsibility, new { @class = "Hdn1" })
                                                </td>
                                            }
                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td>
                                                    <div class="controls">
                                                        @*<div data-date="@DateTime.Now.ToString("dd-MM-yyyy")" class="input-append date datepicker " data-date-format="dd-MM-yyyy">*@
                                                        @Html.TextBoxFor(m => m._ActivityList[i].AssignedDate, new { @class = "rowwidth form-control m-input", @Placeholder = "Assigned Date", @id = "assigneddate", @Onchange = "GetAging(this);", @type = "date" })
                                                        @*<span class="add-on"><i class="icon-th"></i></span>*@
                                                        @*</div>*@
                                                    </div>
                                                </td>
                                            }
                                            else
                                            {
                                                <td id="tdassigneddate">
                                                    <div class="controls">
                                                        @*<div data-date="@DateTime.Now.ToString("dd-MM-yyyy")" class="input-append date datepicker " data-date-format="dd-MM-yyyy">*@
                                                        @Html.TextBoxFor(m => m._ActivityList[i].AssignedDate, new { @class = "rowwidth form-control m-input", @Placeholder = "Assigned Date", @id = "assigneddate", @Onchange = "GetAging(this)", @type = "date", @style = "display:none;" })
                                                        @*<span class="add-on"><i class="icon-th"></i></span>*@
                                                        @*</div>*@
                                                    </div>
                                                </td>
                                            }
                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td>
                                                    <div class="controls">
                                                        @*<div data-date="@DateTime.Now.ToString("dd-MM-yyyy")" class="input-append date datepicker " data-date-format="dd-MM-yyyy">*@
                                                        @Html.TextBoxFor(m => m._ActivityList[i].TargetDate, new { @class = "rowwidth form-control ", @Placeholder = "Target Date", @id = "targetdate", @type = "date", @Onblur = "CheckDateDiff(this)" })
                                                        @* <span class="add-on"><i class="icon-th"></i></span>*@
                                                        @*</div>*@
                                                    </div>

                                                </td>
                                            }
                                            else
                                            {
                                                <td>
                                                    <div id="tdtargetdate" class="controls">
                                                        @*<div data-date="@DateTime.Now.ToString("dd-MM-yyyy")" class="input-append date datepicker " data-date-format="dd-MM-yyyy">*@
                                                        @Html.TextBoxFor(m => m._ActivityList[i].TargetDate, new { @class = "rowwidth form-control ", @Placeholder = "Target Date", @id = "targetdate", @type = "date", @style = "display:none;", @Onblur = "CheckDateDiff(this)" })
                                                        @* <span class="add-on"><i class="icon-th"></i></span>*@
                                                        @*</div>*@
                                                    </div>

                                                </td>
                                            }
                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td>

                                                    <select id="ddlAuthority" class="req10" style="width:85px" onchange="changeAuth(this)">
                                                        @foreach (SelectListItem option1 in Model._AuthorityList)
                                                        {
                                                            <option value="@option1.Value" @(option1.Value == Model._ActivityList[i].ApprovingAuthority ? "selected='selected'" : "")>@option1.Text</option>
                                                        }
                                                    </select>
                                                    @Html.HiddenFor(m => m._ActivityList[i].ApprovingAuthority, new { @class = "Hdn2" })
                                                </td>
                                            }
                                            else
                                            {
                                                <td id="tdddlAuthority">

                                                    <select id="ddlAuthority" class="req10" style="width: 85px; display: none" onchange="changeAuth(this)">
                                                        @foreach (SelectListItem option1 in Model._AuthorityList)
                                                        {
                                                            <option value="@option1.Value" @(option1.Value == Model._ActivityList[i].ApprovingAuthority ? "selected='selected'" : "")>@option1.Text</option>
                                                        }
                                                    </select>
                                                    @Html.HiddenFor(m => m._ActivityList[i].ApprovingAuthority, new { @class = "Hdn2" })
                                                </td>
                                            }
                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td>
                                                    <div class="control-label">
                                                        @*<div data-date="@DateTime.Now.ToString("dd-MM-yyyy")" class="input-append date datepicker " data-date-format="dd-mm-yyyy">*@
                                                        @Html.TextBoxFor(m => m._ActivityList[i].CompletionDate, new { @class = "rowwidth form-control", @Placeholder = "Completion Date", @id = "completiondate", @Onblur = "GetAging(this)", @type = "date" })
                                                        @*<span class="add-on"><i class="icon-th"></i></span>*@
                                                        @*</div>*@
                                                    </div>
                                                </td>
                                            }
                                            else
                                            {
                                                <td>
                                                    <div id="tdcompletiondate" class="control-label">
                                                        @*<div data-date="@DateTime.Now.ToString("dd-MM-yyyy")" class="input-append date datepicker " data-date-format="dd-mm-yyyy">*@
                                                        @Html.TextBoxFor(m => m._ActivityList[i].CompletionDate, new { @class = "rowwidth form-control", @Placeholder = "Completion Date", @id = "completiondate", @Onblur = "GetAging(this)", @type = "date", @style = "display:none;" })
                                                        @*<span class="add-on"><i class="icon-th"></i></span>*@
                                                        @*</div>*@
                                                    </div>
                                                </td>
                                            }
                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td> @Html.TextAreaFor(m => m._ActivityList[i].Remarks, new { @Class = "from-control rowwidth", @id = "remark" }) </td>
                                            }
                                            else
                                            {
                                                <td> @Html.TextAreaFor(m => m._ActivityList[i].Remarks, new { @Class = "from-control rowwidth", @id = "remark", @style = "display:none;" }) </td>
                                            }
                                            @if ((Model._ActivityList[i].FurtherModification4 == null || Model._ActivityList[i].FurtherModification4 == "2") && (Model._ActivityList[i].FurtherModification10 == null || Model._ActivityList[i].FurtherModification10 == "2") && (Model._ActivityList[i].ApplicationforPatent == null || Model._ActivityList[i].ApplicationforPatent == "2") && (Model._ActivityList[i].NeedOfDevelopment == null || Model._ActivityList[i].NeedOfDevelopment == "2"))
                                            {
                                                <td> @Html.TextBoxFor(m => m._ActivityList[i].Aging, new { @id = "aging", @Class = "from-control", @readonly = true, @style = "width:30px" }) </td>
                                            }
                                            else
                                            {
                                                <td> @Html.TextBoxFor(m => m._ActivityList[i].Aging, new { @id = "aging", @Class = "from-control", @readonly = true, @style = "width:30px;display:none;" }) </td>
                                            }
                                            <td>
                                                @if (item.Activity != "Preparation of prototype")
                                                {
                                                    @Html.CheckBoxFor(m => m._ActivityList[i].ActivityMarkAsComplete, new { @Class = "from-control span11 req12", @id = "ChkActivityMarkAsComplete" })
                                                }
                                            </td>
                                            @*<td> @Html.TextBoxFor(m => m._ActivityList[i].Aging, new { @id = "aging", @Class = "from-control", @readonly = true, @style = "width:30px" }) </td>*@
                                        </tr>
                                        <input type="hidden" value="@(++i)" />
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td>No Data Availabe</td>
                                    </tr>

                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
<div class="container">
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="HeaderName"></h4>
                </div>
                <div class="modal-body" id="partialDiv">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="HeaderName1">Development Sheet</h4>
                </div>
                <div class="modal-body" id="partialDiv1">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function ChangeResp(e) {
        var vdv = $(e).closest("tr").find("#Responsibility option:selected").val();
        $(e).closest("tr").find(".Hdn1").attr('value', vdv);
    }
    function changeAuth(e) {
        var vdv = $(e).closest("tr").find("#ddlAuthority option:selected").val();
        $(e).closest("tr").find(".Hdn2").attr('value', vdv);
    }
    $(document).ready(function () {
        debugger;

        $("#tblCustomers").on('change', '#FurtherModification4', function () {
            var drp1 = $("#FurtherModification4").val();
            debugger;
            if (drp1 == "1") {
                debugger;
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").hide();
                currentRow.find("#assigneddate").hide();
                currentRow.find("#targetdate").hide();
                currentRow.find("#ddlAuthority").hide();
                currentRow.find("#completiondate").hide();
                currentRow.find("#remark").hide();
                currentRow.find("#aging").hide();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', true);
            }
            else {
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").show();
                currentRow.find("#assigneddate").show();
                currentRow.find("#targetdate").show();
                currentRow.find("#ddlAuthority").show();
                currentRow.find("#completiondate").show();
                currentRow.find("#remark").show();
                currentRow.find("#aging").show();
                currentRow.find("#ChkActivityMarkAsComplete").show();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', false);
            }
        })
        $("#tblCustomers").on('change', '#FurtherModification10', function () {
            var drp1 = $("#FurtherModification10").val();
            debugger;
            if (drp1 == "1") {
                debugger;
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").hide();
                currentRow.find("#assigneddate").hide();
                currentRow.find("#targetdate").hide();
                currentRow.find("#ddlAuthority").hide();
                currentRow.find("#completiondate").hide();
                currentRow.find("#remark").hide();
                currentRow.find("#aging").hide();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', true);
            }
            else {
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").show();
                currentRow.find("#assigneddate").show();
                currentRow.find("#targetdate").show();
                currentRow.find("#ddlAuthority").show();
                currentRow.find("#completiondate").show();
                currentRow.find("#remark").show();
                currentRow.find("#aging").show();
                currentRow.find("#ChkActivityMarkAsComplete").show();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', false);
            }
        })
        $("#tblCustomers").on('change', '#ApplicationforPatent', function () {
            var drp1 = $("#ApplicationforPatent").val();
            debugger;
            if (drp1 == "1") {
                debugger;
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").hide();
                currentRow.find("#assigneddate").hide();
                currentRow.find("#targetdate").hide();
                currentRow.find("#ddlAuthority").hide();
                currentRow.find("#completiondate").hide();
                currentRow.find("#remark").hide();
                currentRow.find("#aging").hide();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', true);
            }
            else {
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").show();
                currentRow.find("#assigneddate").show();
                currentRow.find("#targetdate").show();
                currentRow.find("#ddlAuthority").show();
                currentRow.find("#completiondate").show();
                currentRow.find("#remark").show();
                currentRow.find("#aging").show();
                currentRow.find("#ChkActivityMarkAsComplete").show();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', false);
            }
        })
        $("#tblCustomers").on('change', '#DRPNeedOfDevelopment', function () {
            var drp1 = $("#DRPNeedOfDevelopment").val();
            debugger;
            if (drp1 == "1") {
                debugger;
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").hide();
                currentRow.find("#assigneddate").hide();
                currentRow.find("#targetdate").hide();
                currentRow.find("#ddlAuthority").hide();
                currentRow.find("#completiondate").hide();
                currentRow.find("#remark").hide();
                currentRow.find("#aging").hide();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', true);
            }
            else {
                var currentRow = $(this).closest("tr");
                currentRow.find("#Responsibility").show();
                currentRow.find("#assigneddate").show();
                currentRow.find("#targetdate").show();
                currentRow.find("#ddlAuthority").show();
                currentRow.find("#completiondate").show();
                currentRow.find("#remark").show();
                currentRow.find("#aging").show();
                currentRow.find("#ChkActivityMarkAsComplete").show();
                currentRow.find("#ChkActivityMarkAsComplete").prop('checked', false);
            }
        })

    })

    function GetAging(e) {
        debugger;
        CheckDateDiff(e);
        var targetdate = $(e).closest("tr").find("#completiondate").val();
        var assigneddate = $(e).closest("tr").find("#assigneddate").val();
        if (assigneddate != "" && targetdate != "") {
            var start = new Date(assigneddate);
            var end = new Date(targetdate);
            var diffDate = (end - start) / (1000 * 60 * 60 * 24);
            var days = Math.round(diffDate);
            $(e).closest("tr").find("#aging").val(days);
        }
        if (assigneddate == "") {
            $(e).closest("tr").find("#aging").val(0);
        }
        if (targetdate == "") {
            $(e).closest("tr").find("#aging").val(0);
        }
       
    }

    function CheckDateDiff(e) {
        debugger;
        var targetDate = $(e).closest("tr").find("#targetdate").val();
        var assignDate = $(e).closest("tr").find("#assigneddate").val();
        var completionDate = $(e).closest("tr").find("#completiondate").val();

        // Convert date strings to Date objects for comparison
        var targetDateObj = new Date(targetDate);
        var assignDateObj = new Date(assignDate);
        var completionDateObj = new Date(completionDate);

        // Check if TargetDate is less than AssignDate
        if (targetDate && assignDate && targetDateObj < assignDateObj) {
            alert('Target Date cannot be less than Assigned Date.');
            $(e).closest("tr").find('#targetdate').val(''); // Clear the TargetDate field
        }

        // Check if CompletionDate is less than AssignDate
        if (completionDate && assignDate && completionDateObj < assignDateObj) {
            alert('Completion Date cannot be less than Assigned Date.');
            $(e).closest("tr").find('#completiondate').val(''); // Clear the CompletionDate field
        }
    }




    $('.bar-percentage[data-percentage]').each(function () {
        var progress = $(this);
        var percentage = Math.ceil($(this).attr('data-percentage'));
        $({ countNum: 0 }).animate({ countNum: percentage }, {
            duration: 2000,
            easing: 'linear',
            step: function () {
                // What todo on every count
                var pct = Math.floor(this.countNum) + '%';
                progress.text(pct) && progress.siblings().children().css('width', pct);
            }
        });
    });

</script>
<script>
    // Get the button
    let mybutton = document.getElementById("btnSave1");

    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > -1 || document.documentElement.scrollTop > -1) {
            mybutton.style.display = "block";
        }
        else {
            mybutton.style.display = "none";
        }
    }

    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
        document.body.scrollTop = -1;
        document.documentElement.scrollTop = -1;
    }
    function removeFileInput(button) {
        $('#DesignValidation_DOCUMENTS').val('');
        $('#DesignValidation_DOCUMENTSPATH').val('');
        $('#DesignValidation_DocumentName').val('');
        $("#uniform-DesignValidation_DOCUMENTS").find(".filename").empty();
        $('#DocLink').text('');
        $('#DV_Remove').hide();
    }
</script>
@*}*@
<script src="~/Content/js/jquery.min.js"></script>
<script src="~/CustomJS/DesignDevelopmentPlan.js"></script>
<script src="~/Content/js/bootstrap-datepicker.js"></script>



